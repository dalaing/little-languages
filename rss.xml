<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"
    xmlns:dc="http://purl.org/dc/elements/1.1/">
    <channel>
        <title>Little Languages</title>
        <link>http://dlaing.org/little-languages</link>
        <description><![CDATA[]]></description>
        <atom:link href="http://dlaing.org/little-languages/rss.xml" rel="self"
                   type="application/rss+xml" />
        <lastBuildDate>Mon, 27 Jun 2016 02:00:00 UT</lastBuildDate>
        <item>
    <title>N - the language of natural numbers</title>
    <link>http://dlaing.org/little-languages/posts/n.html</link>
    <description><![CDATA[<h1 id="introducing-n">Introducing <em>N</em></h1>
<p>We’ve just finished covering the <a href="./b.html">B language</a>.</p>
<p>Now we’re going to look at the <em>N</em> language, which deals with natural numbers.</p>
<p>This is going to be a relative short tour, since you’ve seen most of this before. The important points are that we’ll be dealing with inductively defined values, and we’ll be looking briefly at the difference between strict and lazy evaluation.</p>
<h1 id="terms-of-n">Terms of <em>N</em></h1>
<p>The natural numbers are defined as:</p>
<ul>
<li><img width=15 alt="\text{O}" height=12 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAZCAQAAACMPFaRAAAA70lEQVR4nKVUyxWEIAxMK1RiI9RhGTZhD7ZABzbAmaMXDrJDPOwnH/Ht8J4HMiETHEJkI9DMa3I4KlY6sBKvTBXfMJYYQa6o+MZEhU5aRmo21JR1duwnP3UB5TQkHohtdmpAYkNtHRNi7asdIa06urIdv072+lqYoSpLvizqbXVG1kIHh/z/WZmjoFmBDxRdXXyQLOwyP0gWl/okWVgl/NMzsbvazQM0OVm/DKFO9dh66zCXUQe8bTbmeJcGvH+9K92ihceEi56+K/ubMWF+kPjlBLFXxobgzAMvwe+905UHonUTKiKE7jgk4xDjjb8ArJGWAJB9UBEAAAAASUVORK5CYII=" class=inline-math style="margin:0; vertical-align:-1px;"/>, for the number zero</li>
<li><img width=26 alt="\text{S n}" height=12 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAAZCAQAAAA7ga62AAABPklEQVR4nLWVyxHDIAxE1QqV0Ah1UEaaoAdaoAMa4OxjLjnEWcn52OETmODlkEETeCCkNVEuTRbD7Oaq8K+/ZWihG0UK8hsktgA8XY5W8u+ZAupKF8Smoww2DRn8fgYqYdv8VdIZqBWvksvMR9kKilAeJ6BKCSTU4wkJzMuC5Xc9NkmxCmvLoiEChn3Ogozm8bQUNqcxoch1N2pB922HVDiuF3cJmMfWIidLXuM28EpBUHF3F8a71hI2pvUwUpcDBqlf9xVp3oulsSTiTh9YH2otwDulkfft9ZqJqGw8hGIZgV3nonSlBFyWmr9RttpRPd4+iKpldpmPKjvghvqlQVTNlHrKfRh1LziX7/peDaO4cf0hysXeY8BRjEw1IzsUv5USXECJs1/HLqc/GpktRr7O//IEdomIyydx6Wl6AH4w4Oq+q7PZAAAAAElFTkSuQmCC" class=inline-math style="margin:0; vertical-align:-1px;"/>, for the successor of the number <img width=12 alt="\text{n}" height=7 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAPCAQAAABUrcdQAAAAZUlEQVR4nGNggIEyhj6G40BYBuUdB8MYBpzgLcNXhv9AeJxBkeEawzYGeyB9HMi/hlsLA1jBcaAShLkgQxbj1/AWRQEBO46DHYVpBAEbRjUMtIZrQOlfwDSETwQO/qPAMqwiQAAAPTthLvmYVhgAAAAASUVORK5CYII=" class=inline-math style="margin:0; vertical-align:-0px;"/></li>
</ul>
<p>The terms of <em>N</em> are as follows:</p>
<p><img width=77 alt=" \begin{aligned} t =&amp; \ \text{O} \\   |&amp; \ \text{S t} \\   |&amp; \ \text{pred t} \end{aligned} " height=64 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJoAAACBCAQAAACS52vEAAAFWklEQVR4nO2d0ZWrIBCGaYVKaIQ6LMMm6MEW6MAGfPbRlzyYhcEkoqij2QDqfJ67d4+yEf8IAs4PjOUKZwVsInVGzoJindk0bA17mJ88dZbyRhqRHuYO+yBYy3pWJsvRbkrzTcf8lhV7mntsfsba7NcR8/EVvcmsjHa20pytX/iSOnOsipaTL5BwEbHg8BWphaPCHHt6xTZTKpPNJtrZbBF8rBxvNo5nQhOxSLg7aa3eKiHF0p2YDY+INZreLH4cUsS783fxalaWw2XY7ffSdXC29Sf1A9JkiW0X2e0BdYj7/feP+ydCkDb/h0HMGk3uEC3rZi6mjSYhFW5bu9hih2gZN3KxbbQCva3VV3tEy7iJG7eNxq9Rp8Ws0SyumK8PBGHSJCVur9N9Sev1nrsbM+4TxO11WtRmJb+dIjHYGu3VpsNsW02FB6LvmXXh9Gu0Zfm4SaWR29a43Hrfcrtvmpxxr7OIllU3zhEWt4XhyawZP/7biGO3VrY6sL9aGNHNiu4tWh2526KhNuWzfTG/uoPY7pE29ct29f3/FPAiRUP1IEwe7IuW7EfRHG6AKBXSFMjaiNcY8TLuARAEQRAEQRAEQRAEQRAEQRAEQRDEOWlzDlvJlT3Ri2ISgi/yf7P+G7CiSQjEr5mG/13YTXvXl8U40ZQX3sWNaB2EX5Foi8hA9JmCIFaMaOJ60mIuvAk6PRukaPFi6KKBuXAbTDVHIkUr7yhasSAam/jZl9B3FS1sxK4RonGIZ7sYuOIZDkOuEG4GnXsI8xEwotUHo7fFYK+tUR6sE4ERTQwmnt48MRW626VmztQ2qs/mh+Abt5/tgarNHLctnhY5+Ow+G24qlVuLZrHx3PXgVsca/W8v2gthnpv9qvHnA4k2wpm9t809NxVtqcOtEH7j24q23OHGjHPcVrRwz9O57/aJtvRJJwMj2tIUYO3u4nkj0ZYKGKbRcWPR+kAHqEI9edVoYEkE/aInBCeabdL6k1pI5JCPm67O9Vcv49rD1mkchLM+Uzun1p55IN30m/pKg5Hbosl3u1+8nZ7VzlfM8lqz4t72Ndw3kGgHINEOQKIdgEQ7AIl2ABLtABd5P0QQBEEQBEEQBEEQBEHsh/yeB6BByAPkJZoLnM/e45KXaDaAsM8/DDAv0Sz42MlkTtIzi5bMSXpm0ZI5Sc8sWrLgrfOKltBJel7REgbbYyIhSygINh1nCn6fBvUVw367V8BvUwOQgnDAdkjj438qRozETtJt0dphUVQNi5griGqcho++0tj5YRrzT3vzeEhztHnH3U4dVdZnVcObfgkxltuiJXeS4opnDT6ocWx2NXNGWVdBOQTJ96NweRvSPA6F12y8RFw9EbECMU5fPC06MGNCO8m0HoqLpRwWr7F0k3MI9lntLHTh089dy1P2ok0z6FYtE16a+dJvKrDXyujWAwotBneJB4ElnEF/GVQddLA0gb2vhemqoMwXF631Cm04Te8949z2eoz4f7/+Odg8ReHXoj0DohWDq4BEWxFt6dJuKVrHxksKYtL4NP8oWlR/33HR3JK7ajWN2zt3unMonoqF1sS9tGjTZ1/4YsXIhTf+Wys2D66+jDWrnUI031/MZw72pTtEzQoof68HWs6OCfRwd0InKV60ZrSOJ4e6yu9DtmxpVhi/J8q9nqLyPkdAlx63YmhCJ+me4imH5Sm1KZaNV6z8CXXmRaWALr0dyagnf2mPdeaoGsZS+DB+gZm+IpmTdG+dJg8PxIh3+2z9mNh1hiRO0m+aHLeFRDsAiXYAvGgXmR7iP8BMfONCBfr4T6lcwYhWvscmSDQgv1d4J+Bifs8/n+Xqn4/Ahk0AAAAASUVORK5CYII=" class=display-math style="margin:0; vertical-align:-29px;"/></p>
<p>We are including <img width=49 alt="\text{pred n}" height=15 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGIAAAAeCAQAAAB9TAM/AAACEklEQVR4nO1XzbGDIBCmFSqhEeuwDJugB1qgAxvgzNGLB83uok9YAU3em4m+8WMyMcv+fUDYVYhvwNOYhP1K9D9CC+lPYr43CYR9SFwED4mr4CFRQis6cGrhWwgpND0boZhOkKNU0ZNO5rXoqQJYZheQej1DIs4pXMw4mrKBFwO4RcedcBCuAaOeBVp1Wph18MFEzDLXwJxbkke5Zv4NVIaeEkBbc4rElpMEWyQvya6vGWHSQ6JiSJI6nokmAguWWyhMMLPBklbqOaZlxHjyOAWyfbT+Q2aJmIFnMs+ChZUIG9z9bO5A+7NBwe+RJVL3W89JM0llL3LBOtpQleiMTEdnZEgrEFTMQzlWKad5J+FLfeh4jk5+0HFMwxVkwcpkKL5Hwh9ITjj2iVFOZ1qOWDy2S8Fng16OxJwhgUPdjUQ5oUuQGJLbIKeTanC475OQtM66qmN31SRYhuOEd9d0KlYpp1+T4HdLTkfRX5tfomahLmmWNwu8G6jl9DaJCYJuCAm0TGcfXO8OlIS9WT11u1l1+vX0IxIOFNbgMlPiPenIrO1WTSToxWuvEz+KmsQ5ilRGTydBViW7RCw1aJZ6xpHavA1zMvhqtNSwWep03O74tDCH7UPoS+VSiXk1TpHGa7OSAglEQ/f88TpxqKg+1GfVhxEO8bxtXQX/hkT1renqwDtjojph77sb+G69dp83I/ECq/jJ8Ai24fIAAAAASUVORK5CYII=" class=inline-math style="margin:0; vertical-align:-4px;"/> here, which represents the predecessor of <img width=12 alt="\text{n}" height=7 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAPCAQAAABUrcdQAAAAZUlEQVR4nGNggIEyhj6G40BYBuUdB8MYBpzgLcNXhv9AeJxBkeEawzYGeyB9HMi/hlsLA1jBcaAShLkgQxbj1/AWRQEBO46DHYVpBAEbRjUMtIZrQOlfwDSETwQO/qPAMqwiQAAAPTthLvmYVhgAAAAASUVORK5CYII=" class=inline-math style="margin:0; vertical-align:-0px;"/>. Since we don’t have negative numbers, we define <img width=88 alt="\text{pred O = O}" height=15 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALAAAAAfCAQAAADt9I/uAAADJElEQVR4nO1ay5GEIBA1FSMhEeIgDJMgB1MgAxPw7NHLHHSbhlmFafmIOk6Vj9opSxp8PH5Ns1X1W6grgYl9m4jF3fhYDJimSmWVktUISWHqqxf81ifx+00+KwggM1VzhsAcGvCCcgsYdlFzPLmf5ENAZQgswXYkxkeX1UnH4W58SKQL3IDltDH9Rshrj6T1g3w2kCpwjYuJ3MhlkDc7U/Vs3I3PJlIF1tPuFcjvI/lH4258NpEmsBkRIbsGLbZG1NG4G58A0gRW0SlXo0V/HLGz+AjQXnt0Ao0kPreeAy3se/2W4ZPbUxImkPZwFel4u7WmCTwi3bB/+UKba1DAZ7CFFQjdgxQc5PTdjreNgNwe/tRqz+SQ11thFTFJWtgcOrCqsGybKPCcIN5w4cZSyKdD/65bvWnxjV+8sVNg+p8MHJ6HlZVCK7fmteQt9nNMYJ7RoCtc/GI+WpaBMFeeTWf7Ry8qHJ9Gr8+Ys5dSo9Wvl4LIaFCoLo5DIS2FOqqYDyWE2RWZY+O7IZJ4pyU34jOvhu1v+chpUNi9F8kptL4W86Eb7ZorYo/sN96ZUi3pGaYIXN9sDS7mQzd6cBYOymayy8Y6LRukWz78LR8TOfrzbY5CIZ+9As+EwEuUtETgProumlF11dmpkE+JwNtilQgsoxtY3OJIFPKhGz3i+AzZuBY++gKBjdseO/vHJi2zIf6UFHP3ivhQjTZDXgZt9Lux8lHbz+g+nZK+RSF8to/HBgyT1t48xFPsVqKID9Vo3wegbBgu7H6vtZaGCfBxLzc9OG3iV3TDB7Jrz0UBH1X5oWQjjvBsPoWRH4tEvYr5Nx+5LOvKqNtYgsw58/qbsN18jI87/JvUuLq602FAm89K1nEJXXJwxqx06mEYEJpXX4pBEV/Nq+FY7ORjRqcOxii8mHxhSGeBe6j0Ny6BwSC9jnVeOZM7Qr60MbvaBv7S42DC3kPrehnUoy8dvxl13cVnmf48emykwYL/JbDOZTu+wGGO6IBob8Oq30Y2n5yb3gc78Ah8Mh6BT4YKnsgeFEHv7RP6weoZxWdA38W9o2CPwIfhDxk12TXdJaG1AAAAAElFTkSuQmCC" class=inline-math style="margin:0; vertical-align:-4px;"/>.</p>
<p>We can easily create a <code>Term</code> type in Haskell:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Term</span> <span class="fu">=</span>
    <span class="dt">TmZero</span>
  <span class="fu">|</span> <span class="dt">TmSucc</span> <span class="dt">Term</span>
  <span class="fu">|</span> <span class="dt">TmPred</span> <span class="dt">Term</span></code></pre></div>
<h1 id="semantics-for-n">Semantics for <em>N</em></h1>
<h2 id="values">Values</h2>
<p>We’ve already mentioned that the natural numbers are either zero or the successor of a natural number. These will be the form of the values of <em>N</em>.</p>
<p>For the zero case, we have:</p>
<p><img width=104 alt=" \prftree[r]{V-Zero} {\text{O val}} " height=22 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANAAAAAtCAQAAAB1oS04AAAEsElEQVR4nO1czbmjIBS1FSuhEeqgDJugB1ugAxtw7dKNC9/ABeMFLj+al3zzEo6beYDEcLx/BzJd94kQnfIuGY2Q2V5/5JK5pld9hc8GA4r27kdfazd2PBoh9NKa3k2PE9m5FIwz8yg9k3hcI7Qur/oK3wAJSzgm+ye96H1xFkPQTpC4Qjt76gm/HD3Y0Jrsn7uhYhZDUGyB1n7UE0/X0HXOjcXLa9Br91YDRcQZVqC+oRIi856Ple8/ZWcLzJuPXQ1V2CBSUFgr48cSxamhubffg83BYhvg1Q4qJMJGtr0ivWioAAOC5qh9KlQ/aaQot5B6ZlMfKWSfwlVdDJ6Hqry4brNVVU3a8mGYYUHD9327aQEiU/0Yq5wdMYbGg4YFUnITs7ju59B3Jv+9bltdPGPwbzqp+VhQ1ZC8rQCkqx+u2zFxyrOzBf6ylrwjm+71jH41Nun+L6MoTonnmxmYyqQHa5DXMdAp8J2T6x/0XwcFxr59uk2Mu2vffxRhNcQqK6AQzEk+FKRHh8WKPlUR/dZhxvNNWf3jA8FhYU+nNt78+kum7J2JVGRGC60SqcoP4WxJMnOK7V+48jmZXw1ttxQ0Sbo36ebanQvD14TGK9I1bmSroNIa8cev/JJb5Uy6bxq/yYd14MuHrX7i2HCkBT8EQfi5aILoiCa+T6foUTVEV0AqskkfU6L6wQTltIVGUAG2GmLVEqkPkSh3u4fjXMlocoImaCVbJWHBH4/BVUPyhobWuxgWu1H+WEhF5mN9wcUpsuilWz8eNoYsN4pAldz4mx8LaTcgQgrHhzulCWKkyrFmpKQi+qqg/D9CZaqYHHjyvtF702Xk5HqkEdAEUe2i4CwzkCBL2IMWM+zmv6vetWF7f8rwedIOSp8dVz8CjpKEqlyosWFrXSCGUeuFVbtDMLqxrlwTsgVShlmy96iv5ojG+rRnXgl3UgKP0m//8p9IdIt7hSeQRS1yd9i71m5xd233VHYJRh5/OVyKvRrPh87hLc/KboUAe9dNkXTo0htU69t0oy/NbcqwNXTK8NjbiqpGUAITqcOemAv9v4VGEAlWFDEGpHO9Eo0gEqrowrDO9eonaQRFWMla18dW0I6Yp+8ec/FI8WU63bBHJ2g5sxFEgJLeQ5SO8ZmizpK4o+LtPNwu3aijchBQEIcpZyOIAL9AUL5ktbmgn5APKHYxz0kaZStM7BtBBMQFgkpFYLzpy5HmpIJaK96XbwQRuEJQqVxlbkfmBP5ljgp6YzoaQQT6X4lBeBy2M6wQ97oHO8lGUCX26L2/N8bAP5okSZvrQRhVQGYjqAJzMQGwVlanJexorlhUN8c5djifzJsF1YI+bHRtxIkzUWDR5tYMs+ANrkZQFbYKLa7GwRmciYIKrNK4NExZI6gaea2trNX5OBKFcKMr1CtOOlTU0hDA6tm03LN01/b5baIQbp3l7GVJjml4gD5DbI9N1PyUHcP+Ps13ifFp5KURdA02vFPiy9VdfuoYOQs2BSc4A2GcXv8Ym7Pjhs4eiNjdL1uYXszt5gEHRha1HJINk2KP7nc0HPQ4K676xy6+7FDsFXBYvkUvZuk/UMkhdedx5g5/3tfjH3lb1iBeyW7YAAAAAElFTkSuQmCC" class=display-math style="margin:0; vertical-align:-1px;"/></p>
<p>and:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">valueTmZero ::</span> <span class="dt">Term</span>
            <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>
valueTmZero <span class="dt">TmZero</span> <span class="fu">=</span>
  <span class="dt">Just</span> <span class="dt">TmZero</span>
valueTmZero _ <span class="fu">=</span>
  <span class="dt">Nothing</span></code></pre></div>
<p>For the successor case, we have:</p>
<p><img width=127 alt=" \prftree[r]{V-Succ} {\text{x val}} {\text{(S x) val}} " height=37 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-5px;"/></p>
<p>and:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">valueTmSucc ::</span> (<span class="dt">Term</span> <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>)
            <span class="ot">-&gt;</span> <span class="dt">Term</span>
            <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>
valueTmSucc val (<span class="dt">TmSucc</span> tm) <span class="fu">=</span>
  <span class="dt">TmSucc</span> <span class="fu">&lt;$&gt;</span> val tm
valueTmSucc _ _ <span class="fu">=</span>
  <span class="dt">Nothing</span></code></pre></div>
<h2 id="small-step-rules">Small-step rules</h2>
<p>We have four small-step rules: two of them are reduction rules, and two of them are congruence rules.</p>
<p>The reduction rules define the predecessor function.</p>
<p>For <code>pred O</code> we have:</p>
<p><img width=196 alt=" \prftree[r]{E-PredZero} {\text{pred O} \longrightarrow \text{O}} " height=25 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-4px;"/></p>
<p>and:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">ePredZero ::</span> <span class="dt">Term</span>
          <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>
ePredZero (<span class="dt">TmPred</span> <span class="dt">TmZero</span>) <span class="fu">=</span>
  <span class="dt">Just</span> <span class="dt">TmZero</span>
ePredZero _ <span class="fu">=</span>
  <span class="dt">Nothing</span></code></pre></div>
<p>For <code>pred (S n)</code> we have:</p>
<p><img width=227 alt=" \prftree[r]{E-PredSucc} {\text{pred (S $v_1$)} \longrightarrow \text{$v_1$}} " height=27 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-5px;"/></p>
<p>and:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">ePredSucc ::</span> <span class="dt">Term</span>
          <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>
ePredSucc (<span class="dt">TmPred</span> (<span class="dt">TmSucc</span> tm)) <span class="fu">=</span>
  value tm
ePredSucc _ <span class="fu">=</span>
  <span class="dt">Nothing</span></code></pre></div>
<p>The two congruence rules deal are used to keep things moving on when <code>S</code> and <code>pred</code> are wrapped around something other than a value.</p>
<p>The rule for <code>S</code> is:</p>
<p><img width=154 alt=" \prftree[r]{E-Succ} {t_1 \longrightarrow t_2} {\text{S $t_1$} \longrightarrow \text{S $t_2$}} " height=34 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-3px;"/></p>
<p>which corresponds to:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">eSucc ::</span> (<span class="dt">Term</span> <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>)
      <span class="ot">-&gt;</span> <span class="dt">Term</span>
      <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>
eSucc step (<span class="dt">TmSucc</span> tm) <span class="fu">=</span> <span class="kw">do</span>
  tm&#39; <span class="ot">&lt;-</span> step tm
  return <span class="fu">$</span> <span class="dt">TmSucc</span> tm&#39;
eSucc _ _ <span class="fu">=</span>
  <span class="dt">Nothing</span></code></pre></div>
<p>and the rule for <code>pred</code> is:</p>
<p><img width=200 alt=" \prftree[r]{E-Pred} {t_1 \longrightarrow t_2} {\text{pred $t_1$} \longrightarrow \text{pred $t_2$}} " height=35 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-4px;"/></p>
<p>which corresponds to:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">ePred ::</span> (<span class="dt">Term</span> <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>)
      <span class="ot">-&gt;</span> <span class="dt">Term</span>
      <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>
ePred step (<span class="dt">TmPred</span> tm) <span class="fu">=</span> <span class="kw">do</span>
  tm&#39; <span class="ot">&lt;-</span> step tm
  return <span class="fu">$</span> <span class="dt">TmPred</span> tm&#39;
ePred _ _ <span class="fu">=</span>
  <span class="dt">Nothing</span></code></pre></div>
<h2 id="strict-versus-lazy">Strict versus Lazy</h2>
<p>The rules we have seen so far are for strict evaluation.</p>
<p>The usual distinction between strict and non-strict is related to whether evaluation continues inside of function abstraction or not.</p>
<p>We haven’t covered functions yet, but we now have something similar. Recall that constructors in Haskell are functions, and that natural numbers would be represented by:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Nat</span> <span class="fu">=</span>
    <span class="dt">O</span> 
  <span class="fu">|</span> <span class="dt">S</span> <span class="dt">Nat</span></code></pre></div>
<p>so we have a function</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="dt">S</span><span class="ot"> ::</span> <span class="dt">Nat</span> <span class="ot">-&gt;</span> <span class="dt">Nat</span></code></pre></div>
<p>With strict evaluation we evaluate the arguments to <code>S</code> - using <code>V-Succ</code> and <code>E-Succ</code> - when we come across <code>S n</code> as the top-level term.</p>
<p>With lazy evaluation we don’t evaluate the argument to <code>S</code> in either of those cases. The rule <code>E-PredSucc</code> can still move things forward when we have a <code>S</code> inside of one of our terms, but the outer ’S’s are left alone.</p>
<p>This means that for lazy evaluation we completely delete the <code>E-Succ</code> rule above and rely on the other rules to peek inside of the <code>S</code> constructor.</p>
<p>We also need to update the <code>V-Succ</code> rule so that it doesn’t look inside of the <code>S</code> constructor, and so we have:</p>
<p><img width=127 alt=" \prftree[r]{V-Succ} {\text{(S x) val}} " height=27 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-5px;"/></p>
<p>and:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">valueTmSucc ::</span> <span class="dt">Term</span>
            <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>
valueTmSucc (<span class="dt">TmSucc</span> tm) <span class="fu">=</span>
  <span class="dt">Just</span> (<span class="dt">TmSucc</span> tm)
valueTmSucc _ <span class="fu">=</span>
  <span class="dt">Nothing</span></code></pre></div>
<p>For now we’ll stick to strict evaluation, but we’ll come back to lazy evaluation later in the series.</p>
<h1 id="the-rest-of-the-story">The rest of the story</h1>
<p>From this point, we just need to write the code for <code>QuickCheck</code> support, parsing and printing for <em>N</em> and we’re done.</p>
<p>And that’s all we need to do. If we copy the tests and the REPL across from the <em>B</em> project into the <em>N</em> project, they’ll still work.</p>
<p>That’s partly due to using the same interface, but also partly due to the form and robustness of the PLT theorems that we’re using for our properties.</p>
<p>We are going to look at more uni-typed language before we add some new concepts into the mix.</p>
<p><a href="i.html">Read on!</a></p>
<h1 id="exercises-for-the-adventurous">Exercises for the adventurous</h1>
<ul>
<li>Complete the <code>QuickCheck</code>, parsing and printing for <em>N</em>.</li>
<li>Devise semantics for <em>I</em>, with terms for integer literals, <code>+</code>, <code>-</code>, <code>*</code> and <code>^</code>.</li>
<li>Implement <em>I</em> in Haskell, including the semantics, <code>QuickCheck</code>, parsing and pretty-printing.</li>
</ul>]]></description>
    <pubDate>Mon, 27 Jun 2016 02:00:00 UT</pubDate>
    <guid>http://dlaing.org/little-languages/posts/n.html</guid>
    <dc:creator>Dave Laing</dc:creator>
</item>
<item>
    <title>I - the language of integers</title>
    <link>http://dlaing.org/little-languages/posts/i.html</link>
    <description><![CDATA[<h1 id="introducing-i">Introducing <em>I</em></h1>
<p>We <a href="./n.md">previously</a> looked at the language <em>N</em>. Now we’re going to have a look at <em>I</em>, a language built around integer expressions.</p>
<p>This will show how small-step semantics can be used to specify evaluation order, but will also give us some experience with more interesting parsers and pretty printers.</p>
<h1 id="term-of-i">Term of <em>I</em></h1>
<p>We will have terms for integer literals, as well as addition, subtraction, multiplication and exponentiation:</p>
<p><img width=66 alt=" \begin{aligned} t =&amp; \ \text{I int} \\   |&amp; \ \text{t} + \text{t} \\   |&amp; \ \text{t - t} \\   |&amp; \ \text{t} \times \text{t} \\   |&amp; \ \text{t}^\text{t} \end{aligned} " height=112 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIUAAADhCAQAAABMtr77AAAFUUlEQVR4nO2d3bWiMBSFaYVKaMQ6KMMm7MEW6IAGfPbRFx+ukwQ8A4pwTv5OxP2x1sxchpuET35jNlRVCZyq7mVqtZukxcGself9VQ8zXaqz+alZXb6p7mbpY6bWOY6mYXW22jqngrM9DEtexTU0/lub/ZwOvr8shq+icS07iWuw254XB1Pdn9+vesFXUZltdX0XWuboq+Ls9tx8SFT41uCp4mIado7bllVSq6jNNu6p4p71SJFehS1fpKI2jbHTcWyYnfII4aoYTr3d5LDZuqPA82qkHa9Npq1uxtL7cY1azpmxMScpO9lt4j7+23OzEsJV0ZkWzU+m1+rm5nRmBXuzUzfm786t+MDpbY2uko8395FCtoN0b9cVw+bfT1bx9nLCFe8gTzjXFIfxCpEzbV8bhqu4vq16//KzhwruNUXLnrb3zXAVj9VlPFXkvqawxNgq1uZ4qsh/pChWRd67j4EiVeS++xgoUgX3SNHQWXp7ynMGWZszV8G8xZ8fKT5Lqc1Sr/1Pn6YcZ5AEKqZ3H973+GKKVDE9Q1+z9WOlVnGa/NzMLr5WuJGKPlsPYu12S+4pvDdL3mYfUu/uMNbm1O68OHT5sDuSD+7O/sQ62MXg+naZvrZTzpd8n9MuzrEcjJr7eOxiM9yq75HDZn86AAAAAAAAAAAAAAAAAAA2uKKz/UnaEbpfBVQQUEFwVQSkNYTkq+kFrop8Izny1fQCV4VvWuNPPIDOOxcSCn/4iF8D5cci71xIKLym+qc1pCoCciGh8KNxeVT41xTMdlO90hqC8mPVFMxWUwPTGgIVoTUFgx2EgAoCKgioIOKpaMa43PZ0XxlxugsVywGth3u2AT+gtRMV/uXHqCkYHxWSBzKEqZA/+iEAqCCgguA11SutISg/Rk3B8G/SxWkNQfkxagqG21SvtIag/PCagpE01Set4dejrpILSd35/0VfLqRu6jlv90sIX/SppQYqCKggoIKACiL3czAAAAAAAAAAAADwAeRBCHTdEFBBQAVRQh5ELQEyp4Q8iFoCZE7qPIh22QJS50G0yxaQOg+iW7aI1IMVdcsWkToPole2mNR5EK2yPcAOQkAFARUEVBBQQcRW8f4A9HhlJya2iu7thRvxyk5M6pH/umWLgAoCKojUeRDdskWkzoPoli0idR5Eu2wBqfMgJZTNBJ3/BFQQUEFABQEVBFQQUEEgDwIAAAAAAAAAAIDSQDSGQC8WARUEVBAlRGM065pQQjRGs64JJURjNOuaUEI0RrOuCfGjMWvfrNSMqxi1qEzscZu1S3d8+r9byeM440djTh9kWBFbL1lSjcqkiMYsyeCIUI7KpBnu/iqDI8K3rmikGvk/lSERsUMV/2XIROxSxVOGTMROVdjnNdvzgezQt0sVdte4r1xnxKwrAulUWBE38+en64yYdUUhVQjiKcIik6EWikijYirCIpGxKxWvIix8GYWrkMRXlkQ8y+DIUIvKxI/GLIuwnFgHRLWoTPxoTL9yN8nrn1KKypQSjdGsawSd/wRUEFBBQAUBFQRUEFBBIBoDAAAAAAAAAF8J7muJi3YD4hGaB/mL1I4CCOu66RiPFv0a/FW0Zud4uK/+Ot1n38XCX4WNKvTu91v9h77FICwP8pM7yHJG4ydVLH8H/pMqlr/g/0EVnzIa/1UoPlM3FmGDFe38YWDJT6hYy2jYIUXHSvnxwrEIzYP0bte5/M51xdoI20JeoBaO/psgigEqCKggoIKACgIqCP2XYhQDVBBQQei/KqUY9F+VUgwlvCqlEErNgyiA0bwEVBBQQUAFARUEVBBQQXxJHuQfAPECL5T2FlkAAAAASUVORK5CYII=" class=display-math style="margin:0; vertical-align:-53px;"/></p>
<p>We’ll represent these terms in Haskell with:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">IntTerm</span> tm <span class="fu">=</span>
    <span class="dt">TmInt</span> <span class="dt">Int</span>
  <span class="fu">|</span> <span class="dt">TmAdd</span> tm tm
  <span class="fu">|</span> <span class="dt">TmSub</span> tm tm
  <span class="fu">|</span> <span class="dt">TmMul</span> tm tm
  <span class="fu">|</span> <span class="dt">TmExp</span> tm tm</code></pre></div>
<h1 id="semantics-for-i">Semantics for <em>I</em></h1>
<p>There is only one kind of values in <em>I</em>, the integer literals:</p>
<p><img width=108 alt=" \prftree[r]{V-Int} {\text{(I i) val}} " height=26 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANgAAAA1CAQAAACJ8+06AAAEbUlEQVR4nO2cy4GrIBSGaYVKaMQ6LCNN2IMt2AENZO3SjQtz4YCRx4GAr9wJfG4mimSGX+C8HEIqPi0ZrKPzWnTRq1grdbRX/trlwkCyhbzEMZGeNF6LlnC4OkdFaIx+nqKfVvRcuYwOBroPXudCTJrQzwD97JlbrM7IHCjMjSl4/UkeSf3sF0zOz0oGatnzF0QJFcthGvsFe1TB8mhhqPFB65MHc79gQxUsl1kM9YJemZINiL2CySW5CpaJGmx/r2oiexveR75gQ3B2V4IwbZK78Ij35eIL1sLutDoEq9dn7pVM38XFVXWk2KMVIm1BOXDucM0ZA+gLNor5qXZHKiTphTwUWnF9vRMtRliOZ/hJHrjpU/HAvLHuPbQp4EuiWvC4IYQUsfNaVLLxvbFn1o4UFmz0BOLO5yrYDlxvjCV7YIqwYC/vzOh8roLtoNHb/0ofCVdhxGZY7ExUsLHwI47tjc2ZIdxLBGsLP+L0MOSdHinfyB/hunlcLlglBjW8McwDG6Iztgr2BZQ3xjJCvhvnCPZp2a5YPLQ31u145r8oWHPSFKXg4/8tFh13yI84fE2wRtx01jB3idna/4dBFwzsvTNfsM74zLJiK0BjmbPHy0t6xNq6CmUILIf2geZDwUAIqvc/904OM5ZGzqiMtxrz7PGVm635lXnlJTI2sHhJivE2G6gVv+HkPdG5TEgQOI5v7qu/2D7XomckcpLMekJkMqB/bGqmR7Vze2AklH6/An8JyuU7Cfvmw2RAYQFZUgVjMBd9/4XfaKweF+wPwQObbXoulaJPSZt49xkUJBgNbrb7y0tW5ttMj4IE69+2istxwYbsjfzINxUi2BQMxxwX7IHubVdQjGCUvIJOW5pgygXAXxqI9b7CrLj6Oh+b9xmmW/XgbYXKY4oRrI3EjNMEG7Q/gg/X/DF6IEtSZuhhMUJD28sKHbR56iutODMh7kIxgg0RSdKXxPBwjU72CEd5/bbpsy2nzDJdpBOxeDtjFYycIxhPdJ8H4tYHNu/FdIDZt0nEEbu2GMHGiB13hmCxB8KE6YyUeWf7/sm+hn1bUYKFuFMw9ZuYu+m298l0jRmprIIFuFewDqLZ2yffmacQ5lVGThUM4V7BVBJxnUlubk4Wxyxi93pAmrUKhnK3YJvhYSf0VM5py2IXLVjMirtbsM3wsPeskfhFzsUKdocflh5NXA0Psy/1nqTZx/ZtA3Lux4lF+84RDH/DEUcZHnYqMVYdMUZa/SjscGhqbYkPV+4wLuAk2/7YywlPjyULRqC4CyNUXoLBIernL32xxwHHj3i4+WwOtRBykaRGS7/o5WfhiJ0YKi/BCFedq1xbXl0HVq7QwKMjTfoeXjKVZxYjVIyXuPwsD4K9ln0Ozx2lz/iAU++1hoJfMp3zyxiTCBcfVA7RZZne6fRIGqRyCtMFNXkyx1Xn10W0jil9BsOuSvVKInjt736aCx6BigU/cQGjYnb9vHn9fXL+YU+c8abituI5x7fBC7crCfwD7BwfHB27fWQAAAAASUVORK5CYII=" class=display-math style="margin:0; vertical-align:-5px;"/></p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">valueTmInt ::</span> <span class="dt">Term</span>
           <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>
valueTmInt (<span class="dt">TmInt</span> i) <span class="fu">=</span>
  <span class="dt">Just</span> (<span class="dt">TmInt</span> i)
valueTmInt _ <span class="fu">=</span>
  <span class="dt">Nothing</span></code></pre></div>
<p>Most of the steps have one reduction rule which does the required arithmetic:</p>
<p><img width=291 alt=" \prftree[r]{E-AddIntInt} {I (i_1) + I (i_2) \longrightarrow I (i_1 + i_2)} " height=27 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkYAAAA2CAQAAACIaZ4PAAAI1UlEQVR4nO2dzdWsLAyAbcVKbMQ6LMMmZvF1YAt2YAOzdjkbF3M/QX1FIEgC4s/k4dxz7uswDDEQIQTMMoZhzqTKmrOrwDDMvXhl7W6q0KW+s2+We+fuZfqOv4TJY9YcX88t8UtkGMabqQN+s39jemtdscsGed1lJGzk8lsv7/zVXAPX75h5yr9roubN+FeBrKdO/BIZhkHSyg5oGwc04/UOWVozd2dsDfaMni0PXPM9CuBb8UtkGMYbVwdsx+kRjs+YRHn+E7UzjFEF/F78EhmG8cbVAYvRtGAQ+V/IidoZxqiOboygEhmG8cbdAXHGqBlTLj0vmIlaemPURjdGUIkMw3jj7oA4789Hun07WaK/Azi1McrB1bv4JTIM443ZAVX/xysrvUsq53FULUv0jzZKbYzg34tfIsMw3pgdkOr/aP8MkJiouSZ4+RxW0Mjxk70r7+exmdFaiRGq5jAF1ZwW87e68dMp5YeWyDCMN2YH7IjGaPjrhu6JWjMaq0526FLG9NgMjU8es+b9vJbXjjXppBnLZa4lQOElwydFBNUwh1L2G8MSv0SGYbxp50nV8lynTjlKxb/kmqh12lpbI7tyi84DTaqm+neKSfhopWGnaSElMgzjzdQBP/NTfRkHUMpRu+dXjhXsv6aX3mvXfPKsNbeZjt4wFZ32N9YYUUtkGMYbvQMWoxGhdKyvxfuiT1gK6/Rt25V98thrrl7Vr/Ta31hjRC2RYRhvzA7YEDpWrQUBlNYRVmMdL227sk+e9Ro0jnFdoY2MaCVm2Z8riRMnTkuyR0W7l/aFmfGhUxy4U/pnMSq90a3NruyTB6r5cvVSxqjixImTluyrW2YHLDdmq8+y2bSoSWcwfq2zTNR+0hgxDOPHXqBfn00bZrdpS23Z3W+bqLExYhgGxG2MSq8NIW/rZE6szH21fPuGxifPei3cdOifxC2RYRhv3MbIx5mdayZn/a4oWTVTL8M8LTVoUXnWaz9kjEry4EvEaV4zLPyJMoVDvytnE6oVlzHKs8HDgf0CjmCbFunVz6Yd/fqCf7fpyj55XDV/qDEqx2Lpan6Nw9Trdd0nyhRO2F05mzCtuIxR5/QmLfTgplhzolZn+umRhXHsrE8euOb7puOl/F0YwYtxS/RAbG7Tk045PhXCzsFtkAcwhPFEmcJJc1fOhq6VXPpo/hnjn2LsYIN13WxLKb//sd6/whrPLTruS8nTz107R+ZZaq4bQmFAh01O/co09ppqrB68H79EL/KskisAUyB8K5ci9RyD1d7nqG2EfcLBP10mnFQpZQonlaaP4GitmAv2ZrJt6VhRc25/vzJKqpTPPjLqadoPn8/jka3hc+cxa94a9Zl+0V4H8fgZNo+m+CUiqa3PhAno9F8zNNyFmDWn3cNLkQknVXqZwjle00fwZK0USuTT9H9zoumTh04JRl6dUiKs7CKD5so1OLqw0yVe6KPIhJUqtUzhpNB0fJ6uFUbhk9kiGgQd8uxfmMphAmC+5KfcdWU6kxR3xQVdn/7cTyvMH7llprt+Eu+ZOBCci9RmdWWZziPVXYFJYybupRVGodbcaisiWCvebFJMEbBzXWrjvbJM4VDHF6nuCkwaY3SOVpgIwH6Ez84aAg7RFTBvkRJQG++VZQqHds5OursCk8YYnaMVJgKQH0EM3W1hS1PECuU1JviXBFMbL1YmqlQUmcJpiaYjlaZhsPq8k1aYYGA/QmW9LmJ0C/mZ3/kuKgPaSUozRliZQqTCyxROQbr7KTUNgdPnvbTCBAP7EVrL9XyO/szBVRkXPTpehfqKXYxMYVLhZYpBp0XC+pBS0xAYfd5PK0wgsB/B1kSbeS5ek5pohw5Io75iFyNTmFR4mWKQE1aMUmoaAqPP+2mFCQSOPOktaxLL4LcjLQXbTYELmjHCyRQmFV6mOJTZdzRHmNFRSk1DYO7VHbXCBAD7EexD3Vb5lrkUvLdPN40xwsrkkqqSmyQ6x9rMec1+2gXk+9tpNQ2BuVf31ApDBvYjuObdYi/xdpJQybNcvjszdVcTWXY2+2xZdLszaTLZpFpe4FvLbm8f9u83+1Lel+OS3077tJqOp8+jtMJcDtcWRLiJ6u+RFOW85AEHdGNkf3mA+obPNbknJzSZTKnUN60XmX54gp9ME37HxP/nmW9N08TLr9Ol1TQkNV6fx2mFuRiwHwFuoqIJ2I/XDDNGNihNiiKTTar3WNL63O2NbjlxXrMX4xN/X0paTUPg44zuphWGiMuPAK9ICEXbPQZXMEY0mWxSbV8kDL334Kxm36E2haTWNAT2Xt1NKwwZlx8BVujw13Qb7fO9Jmpfy3KBb1I0mWxSlZl6pvI7s6/p4GWKQY28M6k1DYHV5720wgTgPrTKvsOnztZT7/TzkveNkX3QD4M3RhSZ3FIJ1OM0t+BligF2d1pqTUPgTeidtMIE4PIjTPN1s8mvA+PSGMLvNVF88BreGFFkcku1fG73z8QMCfTlhX7up9Y0BE6f99IKE0Dl9CMIBotKX/N3csuzyt1EIUPgAmuMaDK5pZreCQptrz3jDZo9MsontaZhcPq8l1YYEuuh3kuyq66zNjlxQHg9/jNdnu4m2oDOYxj/xhsmk0sqEScEhddRZArHf+PoOZqGwT5c7qQV5lBqoNlDsSHuJvomHHwRf00EkgmSqnBGOVNkCifugeyCuJqGwevzPlphDmZATQhcTZR2sOkRC7QYmXLlqVwZo4pUh7WmIJ6mXcTR5+9ohVHAuUpdTbQZh9X453lzwAKtv0zifV3rcF9f3qbKdE3iadpFDH3+klaYDR+EK/ADNtEcFS18NH4y5WM+4bNYkr6IfC2Zwomj6aP5Na0wCtWo3P2NmGIX9bQxcpBNxPz8Sifv+cn0Npy/W64lUzhxNH00v6YVZgP8/lVfSq9mnpInyhRO+F05mydqhdnQBQ18xcD6evuEnihTOGF35WyeqhVmg+sgqz36i7425okyhRNyV87muVphNlCDyPILD5ufKFM4dw0XfLZWbsz/bE4SmZYrOO8AAAAASUVORK5CYII=" class=display-math style="margin:0; vertical-align:-5px;"/></p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">eAddIntInt ::</span> <span class="dt">Term</span>
           <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>
eAddIntInt (<span class="dt">TmAdd</span> (<span class="dt">TmInt</span> i1) (<span class="dt">TmInt</span> i2)) <span class="fu">=</span>
  <span class="dt">Just</span> (<span class="dt">TmInt</span> (i1 <span class="fu">+</span> i2))
eAddIntInt _ <span class="fu">=</span>
  <span class="dt">Nothing</span></code></pre></div>
<p>and two congruence rules that control the evaluation order.</p>
<p>The first of the congruence rules causes the left-most argument to take a step:</p>
<p><img width=195 alt=" \prftree[r]{E-Add1} {t_1 \longrightarrow t_1^{\prime}} {t_1 + t_2 \longrightarrow t_1^{\prime} + t_2} " height=39 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-4px;"/></p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">eAdd1 ::</span> (<span class="dt">Term</span> <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>)
      <span class="ot">-&gt;</span> <span class="dt">Term</span>
      <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>
eAdd1 step (<span class="dt">TmAdd</span> tm1 tm2) <span class="fu">=</span>
  <span class="dt">TmAdd</span> <span class="fu">&lt;$&gt;</span> step tm1 <span class="fu">&lt;*&gt;</span> pure tm2
eAdd1 _ _ <span class="fu">=</span>
  <span class="dt">Nothing</span></code></pre></div>
<p>and the second rule causes the right-most argument to take a step whenever the left-most argument is a value:</p>
<p><img width=200 alt=" \prftree[r]{E-Add2} {t_2 \longrightarrow t_2^{\prime}} {v_1 + t_2 \longrightarrow v_1 + t_2^{\prime}} " height=39 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-4px;"/></p>
<p>We’re using the variables names <img width=11 alt="\text{v}" height=8 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAQCAQAAABXJiyTAAAAn0lEQVR4nI2SsRWEIBBEpxUqoRHqsAyasAdboINrwJjQ5AK5XRSEU0c/CTvMYxkA2LAYmmF21VXFomNExBdJxiozt6tBKtUWWT9h8uLUaV6UC2vZLWHuFIfPnVkTaOv2nEHOTYhiD029MLNGThL5qCbizWhcX3sZ6kUb17KYhSNuqF0oJW58Yy5xfXdDlDV/Bvts3Di/LkXj0tf858b8A4giQL3UmJycAAAAAElFTkSuQmCC" class=inline-math style="margin:0; vertical-align:-1px;"/> to represent values as a convenient shorthand, however we could have written the rule as:</p>
<p><img width=196 alt=" \prftree[r]{E-Add2} {\text{value} \ t_1} {t_2 \longrightarrow t_2^{\prime}} {t_1 + t_2 \longrightarrow t_1 + t_2^{\prime}} " height=39 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-4px;"/></p>
<p>which better matches the Haskell version we have:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">eAdd2 ::</span> (<span class="dt">Term</span> <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>)
      <span class="ot">-&gt;</span> <span class="dt">Term</span>
      <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Term</span>
eAdd2 step (<span class="dt">TmAdd</span> tm1 tm2) <span class="fu">=</span>
  <span class="dt">TmAdd</span> <span class="fu">&lt;$&gt;</span> value tm1 <span class="fu">&lt;*&gt;</span> step tm2
eAdd2 _ _ <span class="fu">=</span>
  <span class="dt">Nothing</span></code></pre></div>
<p>The semantics for subtraction:</p>
<p><img width=288 alt=" \prftree[r]{E-SubIntInt} {I (i_1) - I (i_2) \longrightarrow I (i_1 - i_2)} " height=27 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-5px;"/></p>
<p><img width=193 alt=" \prftree[r]{E-Sub1} {t_1 \longrightarrow t_1^{\prime}} {t_1 - t_2 \longrightarrow t_1^{\prime} - t_2} " height=39 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-4px;"/></p>
<p><img width=197 alt=" \prftree[r]{E-Sub2} {t_2 \longrightarrow t_2^{\prime}} {v_1 - t_2 \longrightarrow v_1 - t_2^{\prime}} " height=39 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-4px;"/></p>
<p>and for multiplication:</p>
<p><img width=290 alt=" \prftree[r]{E-MulIntInt} {I (i_1) \times I (i_2) \longrightarrow I (i_1 \times i_2)} " height=26 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-5px;"/></p>
<p><img width=194 alt=" \prftree[r]{E-Mul1} {t_1 \longrightarrow t_1^{\prime}} {t_1 \times t_2 \longrightarrow t_1^{\prime} \times t_2} " height=39 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYQAAABOCAQAAACKsKk+AAAHh0lEQVR4nO2dzZWjMAyAaYVKaIQ6KIMmctgOaIEOaIAzx1w4JGvZMNjgGDlxYsvo4+28nRkPkX+EZUnYRcHEoymq2CIwTGxuxbN4xBaCYWIzCkWYYwvBMLF5CEW4xRaCYeLSSMOojC0GQ41WmBK0h41Zg14oQh9RGoYoYEjUsYX4CLMGs/iOfUaMJzV5D4tZg0p8N0aUhiFKR37gmDWA75qI0jBEAVdjF1sIjYe3mWbWYGTHKfMOc2IrhNl7oavXoGTHKeNDKcwHuFoxcJ7L/9NQhx75RLfXoCG+3mF+TFVM8pplDFb9Pw2XIyx2W1S5VGvAECS1FQIwiIGNj2ukWAOGHCnGEEqhCHg/Voo1YIiRagyhFlLhot2p1oAhhSuGUAkTJR61mBVmRDyAfhSESQC7fd0UN6EEYHKcU8ty37vmk2QJXiEwAbDb171QBPDJYBShWByXZ9c/ZLntuovPn07nBF4hMB/jtq+xivAdYEY6f9LzCoEJgNu+jqkIAzLRIt01DkOIfY6OSTxFaNFpc/Ya+KxxGMbI0WkOUdl4ioDPNrLXwG+Nw1yepzZUpoPXPtZAgh0osHFlVw1YERgk97+hMliye2INpMnDtnfVgKYi3MR8dna5zcbbknc1CVMRW3Ly8Lyp8g/xLxsgBtDL5rAlucUaSLiUO4WrBpQVQcVmxp0CDNIUPHsfuxLDv5OPiKf46ir3XD7lJv4Cn9u13t2uCKWQkmDqo0plthNrIPl0iqsGNBVB0S+p5UfAT4aZMXvpSHDFWECxnh5m6F6+oyLUQrr5VFHJQXkgAZTlf60I8DuMUQIzyN05KIflU96Vz5RCzT9nn0kSygMJoCy/SxEqp8Gz3aF3bnzZSCMsnCKsTPkpwp3wQAJyVYQCrQilvIv9xVX4LSvCCTD53peUt4msdyBfRcBk2/ZyOA4vIu+lXGewIlyCvBRBD3jeEM5OpQjqfe5j/u5N3psV4RLkpQit5/Dql/J2L86ofYpOIz+n18yp40/Wv2RFIALlNc5REXy986si9MVxg/x6yc86KsIkB7I+yFcj2Rz2rAgkoL/GUUO0+3s3w39b41URKstqo1+MJbtpdBzkmJ+ssCIwAekXv7xKZ7gj4snHO6zlp0MIbvgrw4rAJM3eNKq89//bFEFFE7b4cfuXjsKKwCTOcY3Qva0I5e78oEErw4rAJI3bfVog0hJ7rfxQbOl3lfbzHyvCxBdfjssW+T0qQm2Um5YhZ17mHXrtb7doQqdFFX6sCL67N/B1rcu2XY07sqwUoT+olHkHfThu0YTRKMOmEZM0bkWoEUkWpiJ0hUq/a4x5hRWBSRy3ImAWzqYiqPS7VqwWSqMMK0L22E0OKrgUAbZI9lssA6Mcuv2ujE0RusMgH1kRqOLKxKeASxEG5+phu4M5HFvLHe2K0OwGeSVXGKwIJBktGTZ0KJfXLPfP/Uoo+GwdvHta8Rh47P7+cWiRwfopKktrnU/LYpJK9DBm2EG27/Elz0rGLCbSs3FWmCEkShydoraNkV30Rlk9arCPIOiXPlfAnlAQyYbYxSiP49JL2f/OJjfPDJFpCjOpgPGnkq5d9d5D+dLNyySNf64mE50WeTJM7jJ8hlmDubC9lfVLCRhvUtjfPwUZPkOvAWTg//4MHfptGJUU9vdPQYbPMGvQodyL35SA8SaFE8BSkOEzzBqMERyn9NswMp+fAOaajkuUpZzaKWS4I0J09BqUbzhO82tDcswfWpbQ7a92wizlq37flyE0vu9i7U9J8DVRcmxDIpRLAu4a9t48tv7cXnQjdKHr2RpShrD0SNMmXA3ya0MiVEv++Fys+yzs06F8sHXjWReGliEklTXsbysXrga5tSExQlmW+24878LwMoRksOaxvCJMDXJrQ1KE8z3r3ejThWn6vyHRGO+DCVWDvNqQEGF9z2s3+nVhqv5vOAkHF6kNWYO82pAMoc8IVt3o04WvZWjkG7FDxAzOWswKMyIwFtaDn1cbEsFuWX5yRnBXuA8LwsoACbtwl1YORvf96uW8r29d84kfP7R9HqMNL47dsnz/jGCY0GeHTxwrg77vclXYX8DQwe3V8M97dwd1YN3ZnBDWPo/VhhfGbVn6KwJ04V18feUTx8swivtsHTu9EakNAcyK5096Vyv6m5e5tSEJ3LatryKsXQjgu9Eug/nWaZzc/gFppdtr8J55mVsbEsG0LPdN6acIehcC2G60y1AXvXavGD7ytsDmj9pr8I55mVsbksHMj9k/L3w6cd+FAK4b3TKoe8Nz9dcvueCzjVw1uHYbkkHfi2A6LKXwnWjrQgDTjW4ZgD7Cswwkxy4tXTW4chsSYjvYaLBk1uA70d6FwO3UMnXLoBaC/vGMT5k8PtNVgyu3ISHA/w627GRtPnwnDo6n59kBdG4Z4LcxfB24lDuFqwZXbkNSqCReO786EfK1DBUqrvsNGi+f++saXLkNsyH20aiwv5l7CZg+3IYZELcT4Vz2zYvfEX2qcRtmQMwzgpUPZTt+gqrrL6Yi5NKGEYl/RvB4SHyjSUxFyKUNmQyIvUZgmCSIaV4yTALENy8Zjf//EwrBKTQ2agAAAABJRU5ErkJggg==" class=display-math style="margin:0; vertical-align:-4px;"/></p>
<p><img width=198 alt=" \prftree[r]{E-Mul2} {t_2 \longrightarrow t_2^{\prime}} {v_1 \times t_2 \longrightarrow v_1 \times t_2^{\prime}} " height=39 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-4px;"/></p>
<p>are defined similarly.</p>
<p>Exponentiation is a little different. The congruence rules follow the familiar pattern, but we have two reduction rules.</p>
<p>We can’t work with negative exponents of integers and continue to get integer results, so we define different rules for the cases of negative and non-negative exponents:</p>
<p><img width=240 alt=" \prftree[r]{E-ExpIntInt} {0 &lt;= i_2} {{I (i_1)} ^ {I (i_2)} \longrightarrow I ({i_1}^{i_2})} " height=41 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAABSCAQAAAAmqM/UAAAK4ElEQVR4nO2dzaGsKgyAaYVKbMQ6LMMmXLwObMEObGDWLt24mPtA9KgQkIC/TD4X9x7PGOcEIiSEyFg6VKxnnTh61jB+95fZhbNWfE+CIJg0B2m4fPp/ywaW3/yN9mjYP3EQBCH4sO9m1F3M+amU4iFT3/0lCOIJFGIs205HS+MMQRAP5SPMtdic4eLMcIDk8vFTcYJ4OXz0JvUJ81ecizO+SjwCvsKECYI4kQIMB3URk2gurpTG+4ZoNkG8HDieKw24DZCWCXlfYb5V/Bdz3KHRpvwE8bPYDbhDSsqEycurzjNeJqb1nbiPnDXQ5Jwg2FEGXExXnDsyyvVqzpTfjn28EESSdNEGXE0T7szxmXwMi/kd9rG1nkb3kgyYIBRxBlxN4SqX8SoK78Me+uqnf+VUndI4CIKpVeAQA+ZjuOraWHMz3Vl+4+0joxC/64Rhn+l/E8QDCfOB1ZT4HnOpxJ0/mzMyLi1XrWWC5fPzuAniQMIMmE/LRfUNa7299ugoVyvW2ZhDRuvPxM9QBydycIQHfBzSRL+bMx9h0suo2902MyCIG4AzsQZvM6jGEdEdg5Zm13kf7hXexkgx2T5sGtqIQfwWX2MzAwPCRC7UKvDHsQrMxUjfeB7uCfDwl6VdT/fLN9d8KEJN/BatMdrm4kxv+bSNfMrDOjdDqlztk+oAU+fj4+jKKT1B3ExmBKyawFRFmUx5bib0MkHOwVzthsZf4vdoNpNouUQUspFBMcenz1kfriYD5uD4mwduwXg6lYfj4U5ijZcQ/51j5R8vMSFqYXRzmuI3Ogi0xKePN+J+nKZ3wGpv/vc3pIbquioZ9aN14naMCuwF7uIlYMnH5Jr5jjJeEevYHC8xKTKhko8wjOawRIjqpJ1JcLplJrph2k9ktWIP/Y2158wjXgIW+x33yCxXHS+ReAB8NSYXiS4jubpu45W5Hi8BS7i52VrxeInE7chSuMu8oU70SevqupnXqkG8BCzh5lYebsA2icTNcNH1+lUiSKrLSO6uG2vAfhKwhJtbc7gB2yQSN/MxdhSnibvrfiznj5WAJdTcuDWUerxEgrgEs+uuvbrKI/gYLwFLqLnZE2KPl0gQl2B2XaxX5yMh2xRXMM/J+H8xXqfWYfm0RFWDjgv0yFiuVQ+QeTPo8g3UVS1Y4uF4iQRxCWbXxb7gzUeCXPwbJlek/zunfv5Osf5u3MAiR7RSTLyrcYW2BUc4847LtTL0KM2es/UGlWqMYwxjyuwc1chPlUgQl6C6bv03iuAnhf4SWi2WIFNka+MT/WbtuGZmBj084VX3Xa8c6Hu8sVPoGIkEcQnNNCp202tg8dlTGAn95ne9MWZJWfrKsbmL3G5unWFerfYz1oBDJRLEJehdNxszzs+SkK22mTZARh1kECXTt6Haze2fcabTfsYacKhEgrgEs+vW0T6wS0I5er3cEiqDDUJN0V13nM+a+99iDThUImOIahN00LF/+HbdbXLg/gZQrIRmmnDbZJnfU6+l9hID9q95TAcd+wccIzW7br6Z2nZsrvJtS2rxkbDFXhstKQMmiPPZS2HomNqSsD2wEvQzUMGlWRYZMEF44za/3CMVEitBpmcoT9hM0oANogdiv/HmdvwjgV7MQ1yO2/x8Alo4CcVkisoThmTpd1TvzNAXc8iAT4UjN92XlIZ2Ey7z42wICmLZJchCwHNLQ54wZMAylWMwPkUGfCLrjfB+5OJpnOZ2vafjMr/W6dviJcgtmuXqJ+kJbx8QDVOLTEz7VGF8KsTcqtXP2SGTcrvEFyBfi63ybmRYY21+vaYKmUW6Z9DShGkUvho+bZvUx9lsrD/ms4nSV4Kck20Nlo+957vpK9JAPqtRmhvJi8sd9TqhLdNfgKOfWZcHbjYPlqMlvoaKmVWPGuCMT1lW8zriTMzFIfMYDpKw/iR09TyKqSlpPpbIk6vJg/hf7ryjmsBuzxXgGUk+vqhO7Sw6S+KrMMu3Z8ysXcG9qipz7WlM/B6LT5mPa9dnzMmk5GPdteMlXsZgmGsbMY7SGLzFx/VIC1pXvZQMmGTFVFGWr0QjP3jBz/VICTLgSzE9YNME5ebs1tssw16+kip+rkdKkAFfiukBN9pbdtWek957atxT8/00+n5bgqkXZYYgPbD9l3JuPWC9kLdKo/uu0unKcZmgt7w2VM+zfTehmsew30pvYX5Ny/etEd1zyBn0wi4/KufaLOQBbw2wGMfncjVOL7tAa3C6/EnIgGM0j3E93K30HmQtrHnn1E8YcMbMd8HpyFWqmAB37Uhmh9aAoRH0s5pWr38/AJ8951UcR3O+5nGuh6uViMfCmSx9qQqF9ePCtz4plZmoUBiEIyoP2jaCQx4wZMDZxszXBtpp/rLkHSNwuOZ9dY93PX5izEoRVTEIjt3axjOz1o8daYDwWqTpAUN3bKbr9W/IwXDFm3zgEM376R7vethbiXg49g6RMVuKeWkdHyBasDNCHrB6I/CWYdo0pk/yWi1pXfGmKHSI5jG6x7getlYiHk/P9B0TM+1BL5YqwO4IecDqbfbbUVmt69XGrhM48PKmdeBzNY9zPWytRDwcvkq/Nn9zVBrAoI2f3ZQCLmvq6/fQM7Ha0T9rtHPwOFu+KBPrbM3jXA+J3krECyg3OyPW1ICHGkqDMKzG6Ea5sVZc/f1vS0wedTjfIO/xbM3jXA8JppWIh2D3w/qdrWAY1uGUPTKw1tGM3Hn5+Vt6abXfua48D2whc8XZmse5HhJMKxEPweaH2SZaagUT6yvZp20Qrj1F27fu6i/MuCeA1QQZHFbzWN1jXI+9OxMPxe6HFeD5fKycUQSEigZUWKYLCKfcV5EjC9AHVvMhuvd3PWZwrUTcjt0Pa4DzfErt49boqZ3Oe914vhO2JlZM2mEsrVY4ZR+c5uN0r663ux4LuFYibsfuh0HdqJ6e4GVAJ2qRiQIcOaZVt4ZfODqCi9N8nO4lLtdjAdtKxM3YVyI7ICI5T6/agGUOuFumQz6mLfo/RHCaj9O9P6m3UmLY/TB4MtWsrjKjve6imOl3DVWczO9vxGo+Tvf+pN9KSWH3w1zekMyg2k4XZeZtO+7EtPOcrpGP3/S8w2cPUZjmQ3Xvz3NaifDAlRZv70ZmnV0Z3cx2AiBP6hp+7+L7z/Nzy6GmxT5/ZZjmQ3Xvz5NaidjF7ofZu5FcMoEyafcimOl3DTkO+nqnIZoP170/6bdSQrj8MHs80l5z6LcNuEUkVIZpPlz3/qTeSknh8sPsTTn8da9a+727E8Gx1VQoUR0/TPPhuvcn7VZKDPfGcDgvtmTLHl49cWLPgOHJXxrgsqFDNB+je3/SbqXEcPlhyt8yO+X6xRVmNStXJwpLP3gHFXLcCtF8jO79SbmVEqNw+mESqG5DNV3DjTHA3YlsnTINOtQqbJjmw3XvT9qtlAyNsXIJN1oLdopedJYSzFR2daLaGphJAd/tBXGaD9W9P2m30s9RWjqm7Z1vrk70OXBv8fM4+h14Ns2H6d6ftFvpBxlQU0N7JzqyOM9vgNP8MQZMrZQcuOCMvRPV1iIuBAw2LHaEAVMrJQimSGtv6UQckaFEzODK49p07w+1UpIUXlWmmrHiv0rkNwurN1TlIQA/ze/p3h9qpUSJfddQflOhufdz5VueqJUSpo2YWnHxXKfc2lBiNI+BWilx2uBiox2VKY0iXPMYqJWSJ2x5n9O0LJrzEyuolR7H//v/y0EA7nohAAAAAElFTkSuQmCC" class=display-math style="margin:0; vertical-align:-5px;"/></p>
<p><img width=233 alt=" \prftree[r]{E-ExpIntNeg} {i_2 &lt; 0} {{I (i_1)}^{I (i_2)} \longrightarrow I(0)} " height=41 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-5px;"/></p>
<p>To be honest, I wrote the first version of <em>I</em> very late at night, and the semantics and associated code was written mostly by muscle memory. This is just one of the things that <code>QuickCheck</code> caught while I was trading sleep for talk preparation.</p>
<h1 id="parsing-and-printing">Parsing and printing</h1>
<p>At this point we can turn the handle to write the code we need to test this with <code>QuickCheck</code>.</p>
<p>The parsing and printing code will be a bit more challenging. Fortunately there are some great libraries for this, which is where we’re going next.</p>
<p><a href="i/text.html">Read on!</a></p>
<h1 id="exercises-for-the-adventurous">Exercises for the adventurous</h1>
<ul>
<li>Write a version of I with semantics that evaluate the right-arguments of the expressions first, and use <code>QuickCheck</code> to test that the behaviour is the same.</li>
<li>Complete the <code>QuickCheck</code>, parsing and printing for <em>I</em>.</li>
</ul>]]></description>
    <pubDate>Mon, 27 Jun 2016 02:00:00 UT</pubDate>
    <guid>http://dlaing.org/little-languages/posts/i.html</guid>
    <dc:creator>Dave Laing</dc:creator>
</item>
<item>
    <title>B - the language of Booleans</title>
    <link>http://dlaing.org/little-languages/posts/b.html</link>
    <description><![CDATA[<h1 id="introducing-b">Introducing <em>B</em></h1>
<p>Throughout this series, I’ll be introducing the mathematical notational and the Haskell code side-by-side.</p>
<p>For an easy win, let’s start with the type system.</p>
<p>We’ll refer to the types using variants on <img width=14 alt="T" height=11 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAXCAQAAABdAYziAAAAlUlEQVR4nO2UMRWAMAxEzwpKaqQ6kIEJPNRCHdRAZ0YWBqBk6INchjDDz5T07iW3FLiTkB2VQAQcrdabaJVJ6X3FLgoit4fxMalNuD0mQ+srWzdlhOwotCBrY8RCk+vcmawTn6t3JrEG0kVt1TutpKYucAIzKQwdYSd1YSd1YSd1YSd18Cd18JWkQc59ZR3EwKU/gM4J3UV3ja/+u54AAAAASUVORK5CYII=" class=inline-math style="margin:0; vertical-align:-0px;"/>, like <img width=17 alt="T_1" height=14 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAcCAQAAABB/M6qAAAA20lEQVR4nN2VwQ3DIAxFvUomYZHMkTG6RHdgBW/AApx75MKhretWFcGOMa3UQz+XYJmH/WURgFYR0LEimApwo1WaA4Uj6b3PcOUMU0hJ2y6S6VDdRRbaZxtTOwjw3UlchhZkhYuIPFo6C8zJwqCoJTImiLzVwvS1aM7oeY2C0rHmDNjOSOnOTEt3Zlq6M9PSnZnUj5wJvkqPndmoxsQtO3TsDBIm0BA6MGNnXJjxzLgw45lxYcYz48B4ZmaICdzSx5iFD8vVP2bOanz6S0z5FoNUyfNvWunr9cDfAUSsnModsafGAAAAAElFTkSuQmCC" class=inline-math style="margin:0; vertical-align:-3px;"/>, <img width=18 alt="T_2" height=14 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAcCAQAAACjINXTAAABCklEQVR4nL1UwRGEIAxMK1RCI9RhGTZxPdACHdgAb59+fHgXM3qCCQGZm1teYNgs604AUngIDctDBRbeuJbkykIn03cfYaOKCgKWDdlJxGtrdmJwH2tE640GqP/E2gWdxsHMTvaHvRjRqBMFpscTkWV1Tie665EckusyWOHlkkNQc4hDdqgDskMdkB3qgOzQY/zFoQH/3Ixqm9qUHQpHJEf8vtbCWXZoTHJkqZnRaMoORRwil4q55mPZof3qpSlkO7FvySGHF01Wp87LtgwZqlOy35qhoOuxJLhO5EqqDV3n6z7uTprtF7m3wnzvgMEQnFkang+6i2ZKIul7lRlM9oKKztU9+iL7GQc+1NayJioC0CsAAAAASUVORK5CYII=" class=inline-math style="margin:0; vertical-align:-3px;"/>, etc…</p>
<p>The first thing we do is define what types we’ll have in our language:</p>
<p><img width=73 alt=" \begin{aligned} T =&amp; \ \text{Bool} \\ \end{aligned} " height=12 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJIAAAAYCAQAAAC7WWy7AAACTUlEQVR4nM1Zy5XDIAykFSqhEeqgjG3CPbgFd0ADPufoiw+bFZA4fISRtcaO9DYvxhMjj9DwWSFqNoqJ4GP19+fYIB6ou75/OvQXnv4LfwRT4gm+RHQsvsVu1zM8yiH6mhIm6ttsPsLVEyI4O0nuya43EkkTBGCSlhl+uiYtEq7n8+LbjcaRlJv2abJdeiORtGYUCTQgN6KuMJwkJwmu/ewYiCTpAqR9OEPxuB66UFqNpJC63w69EUiainEUcqYKnD4rskY8NZIe/s65URBJKiGlIuG4PvaFJCmkynGJvEaR6iRJ314m7/+9MdKPK9J1ViMptJe6qOGOW+/YqmbuIZgk4Yp0neEkDWjqJEjD8tJU5b/nxdhCMEnCFek6y0lSkH/rBSBPnIRXXuDzYxakQh9CMEk6umgLyzyaUxYR02s9FLsrlrEgaS5GvIRY1oiUNoJFEkeRDNll+2GVclN+AxFPHgbdKLkxN5IRTJLuVqS92W1NxritzMEfsWgjmCTdrUh766Qg3u9RsKKbFOMxkohgktRnG3nE6iSlKyV8JxcoMEQEi6S710jO6iSJl/zL7fstJHEUSVWOyjCnz264PaN7uZAHGw4hWCRxFEkSzzWd82c3ZyopN/z14tY2gkXS/Yq0R5JNCkglAvy2JVqNtREMkr5BkeokhTJ5ZMi0nEyWZBriAEnKF9v9JIUo0h2W3kZROi6mJF7tD/WPIawv4KYMyGjbEHt+FNffpkokQYksepJkoHzC/1MsYLAE1xF3v++lpvyWZ+8wro3Y7A9TWkYwOxFnKgAAAABJRU5ErkJggg==" class=display-math style="margin:0; vertical-align:-0px;"/></p>
<p>Flushed with success, we’ll also implement it in Haskell:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Type</span> <span class="fu">=</span>
  <span class="dt">TyBool</span></code></pre></div>
<p>It should be clear that we’re starting with a fairly simple language.</p>
<p>Next, we need to define the terms of our language.</p>
<p>We’ll refer to the terms using variants on <img width=8 alt="t" height=11 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAWCAQAAACMYb/JAAAAfElEQVR4nGNgwAR9DI8ZFLGII4F/DP8ZYvApiAEq+IffjG1AJY/xK3kMVLINv5JfuFyiyFAGhn1ABf+hbDSF9gxvwRBkxi8o+zjZLhk8YTIgLsGqGDl2yrCHLSh2YOAt9nT3Fa7kGjA6sYIYoH+OMywGmoBDAQhAkgQaAAAASkOfC2yaOgAAAABJRU5ErkJggg==" class=inline-math style="margin:0; vertical-align:-1px;"/>, like <img width=13 alt="t_1" height=13 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAaCAQAAADsge97AAAAuElEQVR4nM2TwRGEIAxF04qV2Ih1UIZNbA+2QAc2wJkjFw+wIevuiMLX7MHxc2FgHskPCdFRIznqKucnipRo0EIDQ1Efa2LM6THH2KTHFo2zjoyskaG07i/APXlZOday7u31FP909ow/62luYzVnhl6M5OSbqjmzjOU6NzHkDGCoGwFWOisfANi2G82uRwCWNld+N98AC7+rmVu6FKxklHL7AwSx7/jUBLG27sWCFrMcKcjnfKZe9AboymjcQ7B1RQAAAABJRU5ErkJggg==" class=inline-math style="margin:0; vertical-align:-3px;"/>, <img width=14 alt="t_2" height=13 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAaCAQAAAAOXfQCAAAA60lEQVR4nM1TwRGEIAxMK1RCI9ZhGTRhD7ZABzTAm6cfH3gLx5y5I6jwus0HkU2ySyCqYciTEvZvEemgqZ82gRZH6q0g+hGiB3EdIe59ChXNOQxoR1k/omsKOVK9vaxtT6PDCv/jDmeoDeRoaRMlhRaRmjcwbW/JqBUa5q3OjgvjLyn0tLFUASeEhiWF6ehZ0359sexcoS9dWNZc45b5lM5CZpU90DUxTenZYm2CbU3V9iE6uPmLZJ2TaOlXRNYF1SRavBqA9+OqoaFf2r+BQg9XpjVpjo3A+rSygmVbedghj4NwHRJ8viQeBS9Eln44OatbbgAAAABJRU5ErkJggg==" class=inline-math style="margin:0; vertical-align:-3px;"/>, etc…, and for this language they are recursively defined as:</p>
<p><img width=145 alt=" \begin{aligned} t =&amp; \ \text{true} \\   |&amp; \ \text{false}  \\   |&amp; \ \text{if $t$ then $t$ else $t$} \end{aligned} " height=63 src="data:image/png;base64,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" class=display-math style="margin:0; vertical-align:-29px;"/></p>
<p>This already gets a bit more interesting, since we have choices when it comes to the implementation of the Abstract Syntax Tree (AST) in Haskell.</p>
<p>We can define the AST as this:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Term</span> <span class="fu">=</span>
    <span class="dt">TmBool</span> <span class="dt">Bool</span> 
  <span class="fu">|</span> <span class="dt">TmIf</span> <span class="dt">Term</span> <span class="dt">Term</span> <span class="dt">Term</span></code></pre></div>
<p>or as this:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Term</span> <span class="fu">=</span>
    <span class="dt">TmTrue</span>
  <span class="fu">|</span> <span class="dt">TmFalse</span> 
  <span class="fu">|</span> <span class="dt">TmIf</span> <span class="dt">Term</span> <span class="dt">Term</span> <span class="dt">Term</span></code></pre></div>
<p>For the time being, we’re going to go with the second definition. I only bring it up now because it demonstrates one of the tradeoffs involved with DSL design.</p>
<h1 id="dsl-terminology">DSL terminology</h1>
<p>DSLs can have either a shallow embedding or a deep embedding. Beyond that, there is a vague notion that one embedding might be a deeper embedding than another.</p>
<p>With a shallow embedding we don’t have an AST at all, and the language is defined by a set of functions. The parsing library Parsec is a great example of this.</p>
<p>With a deep embedding we have an AST, so we can manipulate the terms of our language directly. Our <code>Term</code> type is an example of a deeply embedded DSL.</p>
<p>The less we have to borrow from the host language, the deeper our embedding is. The first version of <code>Term</code> above borrows Haskell’s <code>Bool</code> as a primitve, whereas the second version defines it’s own.</p>
<p>That’s a choice that will keep coming up for us, in a number of different areas.</p>
<p>The benefit of sticking to the shallow end of the pool is that we can reuse a lot of things from the host language. This includes things from inside the language - like variable substitution, typeclasses and parametric polymorphism - which can make the DSL fast and extensible. This also includes things from around the language - like debuggers, profilers, and REPLs - which can make the DSL convenient to use.</p>
<p>At the deeper end of things we explicitly model more of the DSL, and so borrow less from the host language. We lose some of the benefits of a more shallow embedding, but we get an increase in the ability to manipulate and reason about programs and program fragments in the DSL.</p>
<p>We’re going to go deeper (heh) into those tradeoffs later in this series. We’ll also play with some shallowly embedded DSLs to help us out.</p>
<h1 id="aside-abstraction-and-reuse">Aside: Abstraction and reuse</h1>
<p>Suppose we want to perform some logical operations with our Boolean values.</p>
<p>We could do so directly in Haskell:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">tmNot ::</span> <span class="dt">Term</span> 
      <span class="ot">-&gt;</span> <span class="dt">Term</span>
tmNot x <span class="fu">=</span> <span class="dt">TmIf</span> x <span class="dt">TmFalse</span> <span class="dt">TmTrue</span>

<span class="ot">tmAnd ::</span> <span class="dt">Term</span> 
      <span class="ot">-&gt;</span> <span class="dt">Term</span> 
      <span class="ot">-&gt;</span> <span class="dt">Term</span>
tmAnd x y <span class="fu">=</span> <span class="dt">TmIf</span> x y <span class="dt">TmFalse</span>

<span class="ot">tmOr ::</span> <span class="dt">Term</span> 
     <span class="ot">-&gt;</span> <span class="dt">Term</span> 
     <span class="ot">-&gt;</span> <span class="dt">Term</span>
tmOr x y <span class="fu">=</span> <span class="dt">TmIf</span> x <span class="dt">TmTrue</span> y</code></pre></div>
<p>Here we’ve called out to the host language in order to build these pieces, so we’re going to have to assemble them using the host language as well.</p>
<p>An alternative would be to extend the terms of our language:</p>
<p><img width=64 alt=" \begin{aligned} t =&amp; \ \ldots \\   |&amp; \ \neg t  \\   |&amp; \ t \wedge t \\   |&amp; \ t \vee t \end{aligned} " height=87 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACvCAQAAACfzR6jAAAEGklEQVR4nO2cwbWyMBCF0wqV2Ih1UIZN0IMt2AENuGb5Ni70JaC/KJLcwck/L3A/Np4TDkluSDLAXJ2LcXBnV0XPWDlXd3N760bYsffdv1o3wpKjF+Bs3QhLzl6Ao3UjLLlscwWoXN0fB9/92/33pmTYua4/wvhf7r9P1o2yYPMrABID7PuzsOPwX1qtBhoD1PBRWETJGIArwCZjgAd8CgBXgEfMgBxF7QKvK8C8FJU/6wQeRe0C46eA2iQOrBeWpUpBQuDyoDMYux9f/8+CslSpqAEDrcHcre6xo7QsVSoghLgn15gtXa3vxNzEi5WlSgUMD8WEEEIIIYQQQgghhBBCCBHSuZ11E2y5bf0LAwWgAHkEKMbNkEuAYvKY8ghQUB5THgEKymTMI0BBmYx5BCjIzaApQJFuBk0BinQz5JgCBa0AiABYxun4kaqYGCCQFqACMk3HVykoBgjoTIHxVQqKAQL6AhS1AuQQoKgVQF+AwlYAfQEKWwH0BUDdDH8GLQEes97ezSBEOxK0djOI0RbA1s2wAG0BrN0MYvQfhgpzM/C1OAWgANZNsIUCUICNC1DQkzshhBBCCCGEEKIF/QJbfyFCASgALkB+D4CBy0AigCz757ggO8AgvwgXQJb9U/WdkY2mSX4RLoAs+6fxXbkK7wGT/CJcAFn+38W1vvuy8TTJMMQFkHgAQsL8zh83fyfgmLgMUgIs8wB091u59Z1KYewySAmwxAOw/3fVPXCHGbsM0CkgmZ/t6L9jQ3cwjHKMUQHwHfp15g+rgW4NqmACSHbo09u8D/uBbg2qYALgO3Q12f0bKCAyyzHGBMDn59EL8NrdqSTf1aAMJgA+Pz/d8O+T4rsalEEEwOdn83HJSwdEhi4DRAB8fnYz57WJP1U3dBkgAqAegHr2aqmAyNBlgAiAegBi4zx3b8hqyAAiAOYBiM/0eEBk6DJABMA8AKm1PhYQGboMsF0g7QFI7/bNJEKQ1ZAJLA5IewAqP3bxW7fyq8D8JDBzGfC1OAWgANZNsIUCUICNC0C/ACGEEEIIIYQQsj1omNj6GyEKQAFomIDPjSUy7ZLf9eMfR9M1ZELPMJH6PD5NoJPWkAU9w8Qp0cFLMvWlcMNEFU2R+ZxAJ6shC5qGiZg7oAMyhos3TIQ0qc8pLvMJdCszTMy5A9qIa2BVhon6402MeYdWYphYmiy9GsPE1B0QEujSI7saw8Q0IEoHQNIaVNE2TLiJXTIdAElrUEXbMPEeECEBkLQGVXQNEwPjgAgJgFZkmBh4ugNiAdA3NSiiaZh48giIYgHQdzWooWmYeCI1T6/CMPHKYJ9HAqClNSihZ5h4pemXNXRjW4Fh4p2q/wcJdCxXYJiY0ogCGxomrKAAFIACWDfBFgqwdQH+tGHiF3Y7Pp1F7ez3AAAAAElFTkSuQmCC" class=display-math style="margin:0; vertical-align:-41px;"/></p>
<p>With the corresponding change to the Haskell:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Term</span> <span class="fu">=</span>
    <span class="fu">...</span> 
  <span class="fu">|</span> <span class="dt">TmNot</span> <span class="dt">Term</span>
  <span class="fu">|</span> <span class="dt">TmAnd</span> <span class="dt">Term</span> <span class="dt">Term</span>
  <span class="fu">|</span> <span class="dt">TmOr</span> <span class="dt">Term</span> <span class="dt">Term</span></code></pre></div>
<p>If those are pieces that we want to be able to manipulate and reason about, that is a good option. We could use all kinds of identities to optimise terms in the language, like <img width=93 alt="not \ldotp not = id" height=12 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALoAAAAYCAQAAADn0y+fAAAC/UlEQVR4nO1Zy3HEIAx1K1RCI9ThMtwEPbgFOnADPvvoiw+7EZ+1EQL8C2YnE3kyWbMKT0jiIZSm+ZfSwpqxmeB5w8+//JKwZmhU9vu26ZsXOD2n9SvSQXxZaZCvQFbgzveu1gI6bWlTdGRFaZCvQO7Aof2ODj8UmJsiAOJVGuTLkHMin2D0HkDG0iBfhpyT4QlGHwFkb8v9NeScPMLoSzVGr4ecliyj97AF5PrWwZuCMZ6cqjcacq0VdHGkn86A2M/HHFAP+Y5wY0Uqg7v12wyjD6DA4RDS3CNgm0p40zXoK2K+Hl+Mhgb+aHBzCZhMti3u8xEmq4d8RwRgcLD8De6l3y2wDrsKmWZ04YYnkymTl0M0SnrK2auFtXv8rDzHq/WQ7whzlsaslMjJY5rRlcsZmyv+5SLkIwELxRo62oP3fq5SfhpZGK1jD83hj/SODjvi9DYYkWlGt2rMceIm9BCYSdwYqo3PVsrPI7eHn/TNdna/h2BvMZM8/u7LMLrdDjpuMxoPI6mIho3t5p6zlXI95DtirbapwtF4aGUYlshUIeWHI6/IFB1a+jVerYd8RyQJM7Vyt4ilGxgfAnaR4RQKbetrvY96yHdEWy29d2ol36M8Fjm68J+o6BSzF+9rvY96yHeEOpRaSfdCIPQkVkF1MEQOBY6OwGu8+iTyp6Y/8qSrl5iNluCwlRcYfeOj3iyOatixDQjz6lH3P4nM3H32yJPvy4c22rtGah0Ji0Je1bXB4j7bq0BPJmWwnfybo39stEg31/Api1xGOmIjTQ3h0WbU6ZZX/dhuU3C3jTgpiMbgCuFz8+TNNkcKvmeQS8lmo1hJpkVOZ2bVdi92cZKhvLpdZ7d/gPVeTtr+CM7geV364LnEujXVaSuJXE4+NjIU4mnNfj3egpWTG4+271SE8mdzmIyoCJIwrTIbeImwnjCNK0kOoVwbvyxyObE2TshG7erRdBhH42ZpisoRFZZIPca68cuwvSSn5znXsK+HfFfiNgrUWOamh+rJDyugxGWKHcCjAAAAAElFTkSuQmCC" class=inline-math style="margin:0; vertical-align:-1px;"/>. If we do decide to change the terms of our language, we really want to minimize how invasive that change is to the rest of our DSL.</p>
<p>If those kinds of terms don’t interest us, then we’d really like something in-between. We’d like the ability to create and use these new concepts from within the DSL, without having to modify the terms of our language. That means we should be able to create and use functions inside our DSL.</p>
<p>We’ll be returning to both of these points soon, but they’re going to be very important in this series.</p>
<h1 id="an-evaluator">An evaluator</h1>
<p>Let’s build an evaluator for our language. Evaluating a term in <em>B</em> should reduce to <code>TmFalse</code> or <code>TmTrue</code>.</p>
<p>Wait, should it?</p>
<p>Meh, let’s just dive in:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">eval ::</span> <span class="dt">Term</span> 
     <span class="ot">-&gt;</span> <span class="dt">Term</span>
eval <span class="dt">TmTrue</span> <span class="fu">=</span> 
  <span class="dt">TmTrue</span>
eval <span class="dt">TmFalse</span> <span class="fu">=</span> 
  <span class="dt">TmFalse</span>
eval (<span class="dt">TmIf</span> t1 t2 t3) <span class="fu">=</span>
  <span class="kw">case</span> eval t1 <span class="kw">of</span>
    <span class="dt">TmTrue</span>  <span class="ot">-&gt;</span> t2
    <span class="dt">TmFalse</span> <span class="ot">-&gt;</span> t3</code></pre></div>
<p>That looks right, doesn’t it? (Hint: it’s not)</p>
<p>Anyhow, this is clearly nuts. We need a way to talk about what it means for our evaluator to be correct. At this point we’re even a bit unclear about what the output of our evaluation function should be.</p>
<p>This is where semantics comes in. There are a few different flavours of semantics, but we’ll be focusing on small-step operational semantics, and they’re the topic of the next post.</p>
<p><a href="b/semantics.html">Read on!</a></p>
<h1 id="exercises-for-the-adventurous">Exercises for the adventurous</h1>
<ul>
<li>Write a correct version of <code>eval</code>.</li>
<li>Write another correct version of <code>eval</code>, that proceeds in a different order to the first one.</li>
<li>Write some tests for the two <code>eval</code> functions.</li>
</ul>]]></description>
    <pubDate>Mon, 27 Jun 2016 02:00:00 UT</pubDate>
    <guid>http://dlaing.org/little-languages/posts/b.html</guid>
    <dc:creator>Dave Laing</dc:creator>
</item>

    </channel>
</rss>
